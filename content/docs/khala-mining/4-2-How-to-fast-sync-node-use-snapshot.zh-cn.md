---
title: "4.2 如果还没有同步好挖矿节点，快速追上的办法"
---

## 面临的问题

如果你的节点没有同步到最新状态，

典型的没有同步到最新的现象是，在节点的日志中看到类似这样的显示

```
2021-09-15 13:33:27 [Relaychain] ⚙️  Syncing 10.4 bps, target=#9236775 (20 peers), best: #9227955 (0xa897…4f36), finalized #9227895 (0x1d6d…1527), ⬇ 1.7MiB/s ⬆ 657.8kiB/s
2021-09-15 13:33:27 [Parachain] ⚙️  Syncing 40.4 bps, target=#400531 (1 peers), best: #396657 (0xb898…6c02), finalized #396443 (0xf470…2f54), ⬇ 378.7kiB/s ⬆ 1.6kiB/s
```

并且 best 和 target 相差很大。

此时你可以考虑使用这里介绍的方法快速追上最新的状态。

注意：如果你的节点已经很接近最新的区块高度（大约推算几个小时就能追上）或者跟最新区块保持同步，请不要操作了，静待自行同步完成即可。

## 下载全量数据快照并解压缩（最新更新日期：2021年9月15日）

下载地址 <https://storage.googleapis.com/khala-snapshots/khala-snapshot-210915.tar.gz>

```
$ sha256sum khala-snapshot-210915.tar.gz
d1ad677bb2421d17e12f7bed2af95beaf7343a2f9c79b4b07b85a0faa521467c  khala-snapshot-210915.tar.gz
```

下载完成后解压缩，得到 `khala-node` 目录

注意，全量数据文件约 220G，全量的数据文件解压缩后大约 350G，也就是说如果要解压缩到本地磁盘，你需要至少 550G 的磁盘可用空间，所以请预留好足够的空间，如果硬盘空间不够，可以考虑解压缩到其他存储，比如移动硬盘

## 准备工作

请确保挖矿是停止的，包括节点都不在运行状态，如果你是 Solo 挖矿，务必在继续前运行

```bash
sudo phala stop
```

关闭挖矿服务

## 使用全量快照替换本地的数据

### 如果是 Solo 挖矿矿工

删除 `/var/khala-dev-node` 目录里的所有文件，将之前步骤解压缩得到的 `khala-node` 目录里的文件移动进去。

### 高级矿工

找到节点的区块存储目录，清空里面的文件，将之前步骤解压缩得到的 `khala-node` 目录里的文件移动进去

## 重新启动服务

如果你是 Solo 挖矿，使用

```bash
sudo phala start
```

重新启动挖矿服务，此时你的挖矿节点将快速恢复到全量快照发布时的状态，再稍等几十分钟到几个小时不等（视网络情况而定）即可跟上最新状态，以便开始挖矿
