---
title: "治理"
weight: 3
draft: false
---

早期的Khala 网络将使用与Polkadot和Kusama一致的的治理机制，使其能够在所有利益相关者的最终要求下优雅地随时间进化。既定目标是确保大多数利益相关者始终可以控制网络。

因此下文中的Khala民主机制基本采用和Polkadot wiki一致的流程和[说明](https://wiki.polkadot.network/docs/learn-governance)

为此，我们汇集了各种新颖的机制，包括存储在链上，并以平台中立的媒介语言（即WebAssembly）定义的无定形状态转换函数和几种链上投票机制，例如自适应绝对多数的全民公投和批量批准投票。对协议的所有更改都必须通过利益相关者的公投表决。

## 机制

要对网络进行任何更改，方法是将活跃的代币持有者和议会组成管理组来管理网络升级决策。无论提案是由公众（PHA持有者）提出的，还是由议会提出的，最终都必须经过全民公投，让所有PHA持有者（按Stake比例决定权重）做出决定。

## 公投

公投是简单、包容、基于质押的投票方案。每次公投都有一个与之相关的特定 *提案*，该*提案*在链上以特权函数调用的形式出现（其中包括最强大的调用：`set_code`，它是更换链上运行的 Runtime 代码，也就是所谓的链上升级）。

全民公投是离散事件，有固定的投票时间，然后进行统计，如果公投获得批准，则进行函数调用。公投总是二元的；您投票的唯一选择是“同意”、“反对”或完全弃权。

公投可以通过以下几种方式之一发起：

- 公众公开提交的提案；
- 议会以多数票通过或全票通过的提案；
- 作为先前全民公投颁布的一部分而提交的提案；
- 由技术委员会提交并经议会批准的紧急提案。

所有公投都有与之相关的公示执行期。这是从公投结束（假设公投获得批准）到公投实施生效之间的一段时间。对于发起公投的前两种方式，公示执行期为7天；对于第三种类型，可以根据需要进行设置。紧急提案处理需要“快速跟踪”的网络重大问题，将有更短的公示执行期。



### 提出公投

#### 公众公投

任何人都可以通过在一定时期内（区块数量）存入最低数量的 PHA 来发起一项公投提案。如果有人支持该提案，他们可以通过存入相同数量的 PHA 代币来支持它——这个动作被称为附议。支持率最高的提案将被选为下一个投票周期的公投。

请注意，这与一项提案获得的附议绝对数不同。例如，三个账户每个绑定 20 PHA 将超过十个账户每个绑定一个 PHA。一旦您复议的提案开始公投，您为复议该提案所绑定的代币将被释放。

公众提案队列中最多可以有 100 个公开提案。

#### 议会公投

议会全票同意 —— 当议会的所有成员一致同意某项提案时，可以将其移至公投。这次公投将有一个负投票率偏差（即，质押投票数量越小，公投通过所需的票数就越少——请参阅下面的 `自适应投票人数偏差`）。

议会多数成员同意 —— 当仅获得简单多数委员会成员的同意时，也可以将提案移至公投，但此时将需要多数票同意才能通过本公投（51% 获胜）。

在任何给定时间内只能进行一次有效的公投，除非还有正在进行的紧急公投。

#### 投票时间表

在Phala 上每 7 天就会进行一次新的公投进行投票，前提是两个队列中的一支队列至少有一个提案。有一个议会提案队列和一个公众提案队列。要进行的公投将在两个队列中最高票提案之间交替进行。

最高票提案由其背后绑定的代币数量决定。如果轮到某个队列中没有正在排队的提案（为空），并且在另一个队列中有正在等待的提案，则另一个队列中的最高票提案将开启公投。

不能同时进行多个公投，紧急公投除外。紧急公投是唯一一个可与常规公投（公共或议会提议）同时进行的公投。

#### 公投投票

为了投票，选民投票的代币通常必须至少锁定到公投结束后的公示执行期后。这是为了确保投票结果需要最低限度的经济支持，并避免卖票行为。

您可以投票但是不锁定，但这样一来您的投票价值只有锁定投票的一小部分。同时，由于锁定时间也影响了投票价值，仅持有少量代币并不意味着您无法影响公投结果。您可以在自愿锁定中阅读更多相关信息。

```
Example:
Peter: 投票 `拒绝`，用 10 PHA 锁定了32周 => 10 * 6 = 60 票
Logan: 投票 `同意`，用 20 PHA 锁定了2周 => 20 * 2 = 40 票
Kevin: 投票 `同意`，用 15 PHA 锁定了8周 => 15 * 4 = 60 票
```

尽管 Logan 和 Kevin 投票的 PHA 比 Peter 多，但他们两人的锁定期都比 Peter 短，导致他们的投票权相当或是更少。

#### 计票

根据提出提案的实体以及是否所有议会成员都投赞成票，存在三种不同的情况。我们可以参考下表。

| **实体**             | **公制**                     |
| -------------------- | ---------------------------- |
| 公众提案             | 正投票率偏差（绝对多数赞成） |
| 议会提案（全票通过） | 负投票率偏差（绝对多数反对） |
| 议会提案（多数通过） | 简单多数制                   |

此外，我们需要以下信息并应用下面列出的公式来计算投票结果。例如，以公开提案为例，因此将应用 `绝对多数赞成` 公式。没有严格的规定投票人数，但所需的绝对多数席位会随着投票率的降低而增加。

```
approve（赞成） - 赞成票数
against（反对） - 反对票数
turnout（投票率） - 投票的代币总数 (不包含 conviction)
electorate（总选票） - 网络中 PHA 发行的总量
```



##### 绝对多数赞成

正投票率偏差，其中在低投票率时需要大量的赞成票才能进行，但随着投票率增加到 100%，它变成了一个简单多数制，如下所示。

![img](https://latex.codecogs.com/svg.latex?%5Clarge&space;%7Bagainst&space;%5Cover&space;%5Csqrt%7Bturnout%7D%7D&space;%3C&space;%7Bapprove&space;%5Cover&space;%5Csqrt%7Belectorate%7D%7D)

##### 绝对多数反对

负投票率偏差，其中在低投票率时需要大量的绝大多数反对票来拒绝，但随着投票率增加到 100%，它变成了一个简单多数制，如下所示。

![img](https://latex.codecogs.com/svg.latex?%5Clarge&space;%7Bagainst&space;%5Cover&space;%5Csqrt%7Belectorate%7D%7D&space;%3C&space;%7Bapprove&space;%5Cover&space;%5Csqrt%7Bturnout%7D%7D)

##### 简单多数制

多数票通过，仅为简单的票数比较；如果赞成票多于反对票，则无论该提案获得多少投票，该提案都会通过。

![img](https://latex.codecogs.com/svg.latex?%5Clarge&space;%7Bapprove%7D&space;%3E&space;%7Bagainst%7D)

```
例: 假设:
- 总量仅 1,500 PHA
- 公开提案
John  - 500 PHA
Peter - 100 PHA
Lilly - 150 PHA
JJ    - 150 PHA
Ken   - 600 PHA
John: 投 `赞成` 且锁定 PHA 1 周  => 500 * 1 = 500 票
Peter: 投 `赞成` 且锁定 PHA 1 周 => 100 * 1 = 100 票
JJ: 投 `反对` 且锁定 PHA 4 周 => 150 * 3 = 450 票
赞成 = 600
反对 = 450
投票率 = 750
总选票 = 1500
```



![\大 \frac{450}{\sqrt{750}}&space;<&space;\frac{600}{\sqrt{1500}}](https://latex.codecogs.com/svg.latex?%5Clarge&space;%5Cfrac%7B450%7D%7B%5Csqrt%7B750%7D%7D&space;%3C&space;%5Cfrac%7B600%7D%7B%5Csqrt%7B1500%7D%7D)

![\大{16.432}&space;<&space;{15.492}](https://latex.codecogs.com/svg.latex?%5Clarge&space;%7B16.432%7D&space;%3C&space;%7B15.492%7D)

由于上面的例子是公众公投，因此将用绝对多数赞成制来计算投票结果。当投票率低时，绝对多数赞成制需要更多 '赞成票' 才能通过公投。因此根据上述结果，公投将被否决。此外，只有获胜方选民的代币被锁定。如果公投失败方的选民认为结果会产生负面影响，他们的代币是可转让的，因此他们投票的代币不会进入锁定期。此外，只有在公示执行期之后，通过的提案才能被自动执行。

#### 自愿锁定

Phala 利用了`自愿锁定`的方式，允许代币持有者通过声明他们愿意锁定代币的时长来增加他们的投票权重。因此，每个代币持有者的投票数将通过以下公式计算：

```
票数 = 代币数量 * 投票乘数
```

每次锁定周期数加倍时，定罪乘数将投票乘数增加一。

| 锁定期 | 投票乘数 |
| ------ | -------- |
| 0      | 0.1      |
| 1      | 1        |
| 2      | 2        |
| 4      | 3        |
| 8      | 4        |
| 16     | 5        |
| 32     | 6        |

锁定期的最大乘数为 6（因此总共有 32 个锁定期），一个锁定期在 Phala 上等于 7 天。只允许加倍；例如，您不能锁定 24 个周期并将您的信念增加 5.5。

当代币被锁定时，您仍然可以使用它进行投票和质押；您只被禁止转账。

无论代币被锁定多长时间，投票仍会同时“计数”（在投票期结束时）。

#### 自适应群体偏差

Phala 延用波卡的概念，`自适应群体偏差`，它作为一种调节的杠杆，在一项议案的投票率没有达到明显的支持或反对时，议会可以使用它来改变有效的绝对多数，来让一项提案更容易或更难通过。

![img](https://wiki.polkadot.network/assets/images/adaptive-quorum-biasing-18c2e70b6b9d2c3abf563219b11974dc.png)

让我们以上面的图片为例。

如果公众提交的公投只有 25% 的投票率，那么将采用 `正投票率偏差`，"赞成”票数必须达到 66% 才能通过。

相比之下，当它有 75% 的投票率时，“赞成”票的总数必须达到 54%，这意味着随着投票率的增加，所需的绝对多数会减少。

当议会通过一致同意提出新提案时，公投将使用“负投票率偏差”进行投票。在这种情况下，会比较容易以较低的投票率通过此议案，并且需要绝对多数投票才能拒绝该议案。随着越来越多的代币持有人参与投票，这种偏见就会接近普通的简单多数制。

参考上图，当公投只有 25% 的投票率时，“同意”票数必须达到 34% 才能通过。

简而言之，当投票率低时，需要绝对多数来否决该提案，这意味着必须达到较低的“同意”票门槛，但随着投票率增加到 100%，它就变成了简单多数。

所有三种计票机制——简单多数制、绝对多数赞成和绝对多数反对——相当于一个简单的多数支持系统，投票率为 100%。

## 议会

为了代表被动的利益相关者，Phala 引入了“议会”的概念。议会是一个由多个参与者组成的链上实体，每个参与者代表一个链上账户。在 Phala 上，该委员会目前由 5 名专家成员组成。预计在未来几个月内将增加到 11 个席位。一般来说，议会最终将拥有固定数量的席位。

除了控制国库，议会主要负责三项治理任务：提出合理的公投、取消无争议的危险或恶意公投以及选举技术委员会。

对于议会提出的公投，必须获得绝对多数成员的赞成，并且没有成员否决。成员对任何单一一项提案只能行使一次否决权；如果在冷静期后重新提交提案，他们可能不会再次否决它。

以 3/5 (60%) 超级多数票通过的议会动议——但未获得一致支持——将根据中立的、多数票通过的投票方案进行公投。如果议会的所有成员都投票赞成某项动议，则该投票被视为一致通过，并成为具有 `负投票率偏差` 的全民公投。

### 取消

如果技术委员会一致同意，或者如果 Root 来源（例如 sudo）触发此功能，则可以取消提案。被取消提案的押金将被烧毁。

此外，议会三分之二多数可以取消公投。如果在公民公投中发现问题（例如提案要执行的链上调用的参数配置错误），则这可以作为最后的手段。

如果取消提案产生足够大的争议，以至于议会无法获得三分之二多数，那么将由利益相关者*集体*决定提案的命运。

### 黑名单

提案可以被 Root 来源（例如 sudo）列入黑名单。列入黑名单的提案及其相关公投（如果有）将立即取消。此外，列入黑名单的提案的哈希不能重新出现在提案队列中。当删除可以使用相同哈希提交的错误提案时，黑名单非常有用，即 提案#2，其中提交者使用纯文本提出建议。

在看到他们的提案被删除后，没有正确了解 Phala 民主系统的提交者可能会被诱惑重新提交相同的提案。也就是说，这远不是防止提交无效提案的万无一失的方法 - 提案文本中的单个更改字符也会更改提案的哈希值，从而使每个哈希值的黑名单无效。

### 如何成为议会成员？

![](https://i.imgur.com/A3iCGJ0.png)


所有利益相关者都可以自由地表示他们对任何注册候选人的批准。

议会选举由同一Phragmén 的选举流程处理，该过程根据提名从候选人池中选择验证者。然而，代币持有者对议员的投票与他们可能对验证者的任何提名是隔离的。议会任期在Phala 上持续1周。

在每个任期结束时，将运行Phragmén 选举算法，结果将根据所有选民的投票配置选择新的议员。选举还将选出一定数量的亚军（目前在 Phala 上为 10 位），他们将保持投票不变。

与选民只能从名单中投票给一名候选人的“先入为主”的选举制度相反，Phragmén 选举是一种更具表现力的方式来表达每个选民的意见。代币持有者可以将其视为一种支持尽可能多的候选人的方式。选举算法将找到一个公平的候选人子集，该子集与整个选民所表达的指示最匹配。

让我们看看下面的例子。

| 第1轮          |      |            |      |      |      |
| -------------- | ---- | ---------- | ---- | ---- | ---- |
| **代币持有者** |      | **候选人** |      |      |      |
|                | A    | B          | C    | D    | E    |
| 彼得           | X    |            | X    | X    | X    |
| 爱丽丝         |      | X          |      |      |      |
| 鲍勃           |      |            | X    | X    | X    |
| 开尔文         | X    |            | X    |      |      |
| **总计**       | 2    | 1          | 3    | 2    | 2    |

上面的例子显示候选人 C 在第一轮选举中获胜，而候选人 A、B、D 和 E 继续留在下一轮的候选人名单上。

| 第二轮         |      |            |      |      |
| -------------- | ---- | ---------- | ---- | ---- |
| **代币持有者** |      | **候选人** |      |      |
|                | A    | B          | D    | E    |
| 彼得           | X    | X          |      |      |
| 爱丽丝         | X    | X          |      |      |
| 鲍勃           | X    | X          | X    | X    |
| 开尔文         | X    | X          |      |      |
| **总计**       | 4    | 4          | 1    | 1    |

对于前 N 个（在本例中为 4 个）亚军，他们可以留下来，他们的选票一直持续到下一次选举。在第 2 轮之后，即使候选人 A 和 B 在本轮中获得相同的票数，候选人 A 也会被选上，因为在加上之前的未使用赞成票后，它的得票比 B 高。

这是 Phala 初始阶段的临时治理配置。如果在第三方审核之后发现任何安全漏洞，它将被更改。进一步的更改可以通过链上治理进行。

### 主要会员

议会是 Phala 社区集体治理的实例 ，实现了所谓的*主要成员*,其投票作为其他成员在超时之前未能投票的默认值。

主要成员是根据Borda 计数选择的。

拥有议会主要成员的目的，是即使在数名成员弃票时，也能确保投票人数。理事会成员可能会通过不投票而让其他成员投票，来表决 “软拒绝” 或 “软赞成”。有了主要成员，它迫使理事会成员要么在投票中表现得很明确，要么让自己的选票计入主要成员所投的选项。



## 技术委员会

技术委员会在Phala治理中被引入，作为 Phala 治理的三个议院之一（连同议会和全民投票议院）。技术委员会由成功部署 Phala 平行链或或指定的 Phala 核心团队组成。团队通过简单多数票添加或删除技术委员会会议。

技术委员会可以与议会一起制定紧急公投，快速投票和实施。这些用于紧急错误修复或将经过实战考验的新功能快速实施到 Phala 平行链中。

紧急公投是唯一一种可以与另一次公投同时进行的公投。因此，通过快速跟踪的公投，可以同时进行两次有效的公投。对一个投票不会阻止用户对另一个投票。

## 常见问题

### 我怎样才能代表我向议会提出改变？

在某些情况下，您可能希望向链上委员会提出上诉，以代表您进行更改。这种情况的一个例子是当资金由于人机界面错误（例如输入另一个网络的地址）而丢失时丢失或锁定资金的情况。这些情况可以在排除合理怀疑的情况下被证明是错误时，议会可能会考虑提出治理动议来纠正它。

向议会上诉的第一步是与议员取得联系。没有哪个地方可以保证您的信息能吸引每位议员的耳朵。但是，有一些不错的地方可以开始，您可以在那里引起其中一些人的注意。所述 Phala 论坛是这样一个地方。创建帐户并加入此论坛后，您可以在此处发布经过深思熟虑的消息，阐述您的案例，并提供理由说明为什么您认为议会应考虑代表您对协议进行更改。

在某些时候，您可能需要一个地方进行更长时间的讨论。为此，推荐在[Khala的Polkassembly](https://khala.polkassembly.network/onchain)上 [发帖](https://khala.polkassembly.network/onchain)。当您在 Polkassembly 上发帖时，请确保您提供符合您情况的所有证据，并明确说明您建议议员制定什么样的改变。请记住 - 议员不需要进行更改，您有责任为应该进行更改的原因提出强有力的理由。

##  